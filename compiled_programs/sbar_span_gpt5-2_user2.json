{
  "traces": [],
  "train": [],
  "demos": [],
  "signature": {
    "instructions": "text\nYou will be given a clinical bedside handover transcript with speaker tags (e.g., [OUTGOING_NURSE], [INCOMING_NURSE], [PATIENT], [DOCTOR], [DIETITIAN]). Your job is to extract SBAR spans as verbatim contiguous substrings from the transcript and output ONLY a JSON-like list of objects:\n\n[\n  {\"label\": \"SITUATION\"|\"BACKGROUND\"|\"ASSESSMENT\"|\"RECOMMENDATION\", \"quote\": \"<exact substring from transcript>\"}\n]\n\nPrimary objective: maximize IoU overlap with the dataset’s gold span annotations. This is span extraction (boundary + split/merge + label alignment), NOT summarization.\n\n====================\nNON-NEGOTIABLE RULES\n====================\n1) Verbatim exact substring\n- Copy quotes EXACTLY (typos, punctuation, capitalization, spacing, missing spaces like “No.No”, etc.).\n- Default: EXCLUDE speaker tags from quotes.\n- Do NOT normalize, correct, or paraphrase.\n\n2) Contiguous spans only\n- Each quote must be one continuous substring from one location in the transcript.\n- Never stitch non-adjacent text.\n\n3) Output format\n- Output ONLY the list of dicts. No markdown, no commentary, no extra keys.\n\n4) Don’t over-generate\n- Only extract spans that are likely annotated in this dataset.\n- Avoid generic rapport/politeness/meta-handover (“Good morning…”, “Thanks”, “that’s all from me”, etc.) unless it contains concrete care instructions (see below).\n\n====================\nCRITICAL DATASET-SPECIFIC BEHAVIOR (from eval feedback)\n====================\n\nA) Situation is often a SINGLE merged block covering admission reason + immediate plan when tightly linked\n- Gold frequently MERGES “reason/presentation” with an immediately following “for procedure today/this afternoon” into one SITUATION span.\n  Example pattern: “admitted with X… She’s for procedure this afternoon.” => ONE SITUATION (not split into SITUATION + RECOMMENDATION).\n- Do NOT include bed/room/age/under Dr unless clearly part of the gold-like clinical statement (usually excluded).\n\nB) Questions: only extract the kinds the gold actually annotates\nGold DOES sometimes annotate certain clinically meaningful questions as their own spans.\nYou must capture these when they appear, because missing them hurts recall:\n\n1) Symptom-screening questions are often ASSESSMENT and are gold-annotated\n- Examples that WERE gold-annotated:\n  - “Alan, any headaches, visual changes, or auras?”\n  - “Any new symptoms, George? Shortness of breath, fever, or chest pain?”\nSo: include symptom-check questions verbatim as ASSESSMENT when they are concrete and clinically specific.\n\n2) Allergy questions are often NOT gold-annotated (even if answers are)\n- In feedback, the allergy QUESTION “Any medication allergies?” was NOT gold, but the allergy ANSWER was gold.\nSo: default to EXCLUDING allergy questions unless you see strong evidence the dataset is annotating that particular question in context.\n- Still extract allergy STATEMENTS as BACKGROUND (see C).\n\n3) Avoid low-yield/meta questions\n- Commonly not annotated: “Okay. How is she currently?”, “What’s been done so far?”, “Observations?”, “Any support needs?”, “Any other concerns?” etc.\nOnly include questions if they match (1) symptom-screening or (rarely) device/line-status questions (see label guide below).\n\nC) Allergies: isolate, and match gold’s boundary quirks\n- Allergy statements are typically BACKGROUND and often isolated as their own span.\n- Gold may annotate only the trailing substring of an allergy utterance (e.g., gold was “no allergies that I know of.” rather than “No, no allergies that I know of.”).\nHeuristic to improve IoU:\n  - If the patient says “No, …” and then the actual allergy content, consider starting at the allergy content (“no allergies…”) rather than including the leading “No,” when it looks like a discourse filler.\n- Gold may also include leading punctuation before allergy, e.g. “. NKDA.” => include the leading “. ” if it is immediately before NKDA in the transcript.\n\nD) Leading punctuation at span start can matter (include it if present)\n- Gold sometimes starts a span with “. ” that belongs to the boundary.\n  Example: gold RECOMMENDATION started with “. Cardiology has reviewed…”\nSo: when a new SBAR span begins right after a period in the transcript, consider that the gold span might include the leading “. ”. Preserve it exactly if you choose that boundary.\n\nE) Some content that sounds like “assessment” may actually be merged into RECOMMENDATION by gold\n- Example from feedback: “Let me know if she deteriorates—… All documentation is up to date…” was ONE RECOMMENDATION span in gold, not split into RECOMMENDATION + ASSESSMENT.\nHeuristic:\n  - When an instruction/escalation recommendation begins (“Let me know if…”, “If anything changes…”, “Call…”, “Escalate…”), gold may keep subsequent trailing status clauses in the SAME RECOMMENDATION span until the speaker/topic clearly shifts.\n  - Therefore, if you have “Let me know if…” followed immediately by “All documentation is up to date…”, prefer MERGING into one RECOMMENDATION span.\n\nF) Call bell / safety-net instructions are often RECOMMENDATION (and may be merged)\n- “press the call bell” / “call bell within reach—press if you need us” are commonly annotated as RECOMMENDATION.\n- Gold may merge call-bell instruction with the next concrete plan sentence (“I’ll be back after…”) into one RECOMMENDATION block. Prefer merging when adjacent and both are actionable.\n\nG) Don’t invent extra spans just because something is clinically true\n- “All documentation is up to date…” alone may be unannotated unless merged into a recommendation block (see E).\n- “Has there been no new issues overnight.” was not gold in an example; prefer excluding vague/no-change standalone lines unless clearly part of an annotated assessment block.\n\n====================\nSBAR LABEL GUIDE (dataset-aligned)\n====================\nSITUATION:\n- Reason for admission/presentation/primary issue and immediate context.\n- Often includes closely attached immediate procedure/next-step statement (see A).\n\nBACKGROUND:\n- Past history/comorbidities/baseline/social/language context.\n- Allergy statements (NKDA / “no allergies…”), typically isolated.\n\nASSESSMENT:\n- Current clinical status, symptoms, observations, results available now, lines/devices status, current treatments underway.\n- Include symptom-screening questions as ASSESSMENT when concrete (see B1).\n- Device/line presence questions can be ASSESSMENT, but only if explicit and likely gold (“No IV lines at present?”).\n\nRECOMMENDATION:\n- Future-facing tasks/needs, due today, booked for, review, escalate instructions, discharge plan, follow-up actions, “we’ll/I’ll …”.\n- Safety-net/call-bell instructions.\n- Escalation instructions often include subsequent clauses (see E).\n\n====================\nBOUNDARY + SPLIT/MERGE HEURISTICS (IoU-optimized)\n====================\n- Start at the first clinically meaningful word; drop greetings/fillers (“Okay”, “Great”, “Alright”) unless gold-like boundaries suggest otherwise.\n  - In feedback, gold started at “George, if anything changes—…” not “Alright, George, …”\n- End exactly before the next label shift; do not include adjacent different-label content.\n- MERGE consecutive same-label sentences into one coherent block (especially ASSESSMENT runs).\n- Special merging rules to mimic gold:\n  1) Merge admission reason + immediate procedure statement into SITUATION when adjacent (A).\n  2) Merge escalation recommendation (“Let me know if…”) with trailing “documentation up to date” etc. into one RECOMMENDATION (E).\n  3) Merge call-bell instruction with immediate next concrete plan (“I’ll be back after…”) (F).\n- Special boundary precision:\n  - Consider including leading “. ” at the start of a span if it immediately precedes the clinically meaningful sentence and appears to be a gold boundary (D).\n  - For NKDA, consider including “. NKDA.” rather than “NKDA.” if the period is immediately attached in the transcript (C).\n\n====================\nOUTPUT\n====================\nReturn ONLY the list of {label, quote} objects, in transcript order.",
    "fields": [
      {
        "prefix": "Text:",
        "description": "${text}"
      },
      {
        "prefix": "Pred Spans:",
        "description": "${pred_spans}"
      }
    ]
  },
  "lm": null,
  "metadata": {
    "dependency_versions": {
      "python": "3.12",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
